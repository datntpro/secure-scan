global
    daemon
    log stdout local0 info
    maxconn 4096
    
defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    log global
    
# ZAP Load Balancer
frontend zap_frontend
    bind *:8080
    default_backend zap_backend
    
backend zap_backend
    balance leastconn
    option httpchk GET /JSON/core/view/version/?apikey=securescan-zap-key
    http-check expect status 200
    
    server zap1 zap-1:8080 check inter 30s fall 3 rise 2
    server zap2 zap-2:8080 check inter 30s fall 3 rise 2
    server zap3 zap-3:8080 check inter 30s fall 3 rise 2
    
# Stats page
frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE